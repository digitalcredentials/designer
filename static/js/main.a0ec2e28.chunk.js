(this.webpackJsonpdesigner=this.webpackJsonpdesigner||[]).push([[0],{134:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(9),s=a.n(r),l=a(182),o=a(181),c=a(18),u=a(13),d=a(14),h=a(11),p=a(16),m=a(15),b=(a(55),a(50)),f=a(70),v=a.n(f),g=a(71),j=a.n(g),y=(a(127),a(129),a(65),a(167)),E=new v.a({allErrors:!0,verbose:!0}),O=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.props.updateSubs(e)},n.myRef=i.a.createRef(),n}return Object(d.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.myRef.current.jsonEditor.set(e.jsonData)}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(y.a,{variant:"h6",color:"inherit"},"Edit JSON"),i.a.createElement(b.a,{ref:this.myRef,value:this.props.jsonData,onChange:this.handleChange,ace:j.a,ajv:E,mode:"tree",allowedModes:b.a.modes.allValues,theme:"ace/theme/monokai"}))}}]),a}(i.a.Component),k=a(25),C=a(173),S=a(172),w=a(184),D=a(77),R=a.n(D),F=a(30),J=a.n(F),I=a(41),x=a(171),W=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).accept=e.accept,n.id=e.id,n.text=e.text,n.state={file:""},n.handleFileChosen=n.handleFileChosen.bind(Object(h.a)(n)),n}return Object(d.a)(a,[{key:"handleFileChosen",value:function(e){var t=e.target.files[0],a=e.target.id;this.setState({file:t}),this.props.loadFile(a,t)}},{key:"render",value:function(){return i.a.createElement(x.a,{variant:"outlined",color:"inherit",component:"label"},this.text,i.a.createElement("input",{type:"file",id:this.id,className:"input-file",accept:this.accept,onChange:this.handleFileChosen,style:{display:"none"}}))}}]),a}(i.a.Component),L=a(76),N=a(51),A=a.n(N);function B(e,t){for(var a=0;a<t.length;a++)A.a.set(e,t[a].key,t[a].value);return e}function P(){return(P=Object(I.a)(J.a.mark((function e(t,a){var n,i,r;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"credential",n=B(t,a),i=JSON.stringify(n,null,2),r=new Blob([i],{type:'application/json;;charset=utf-8"'}),Object(L.saveAs)(r,"credential.json");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return function(t){var a=t.target.files[0],n=t.target.id;e(n,a)}}var M=a(183),V=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).loadJson=function(e){var t=function(e){var t=[];return function e(a,n){a&&"object"===typeof a?Object.keys(a).forEach((function(t){e(a[t],n.concat(t))})):"string"==typeof a&&a.startsWith("data:")&&t.push({key:n.join("."),value:a})}(e,[]),t}(e);n.props.handleChange(e,t)},n.readFile=function(e,t){n.fileReader=new FileReader,n.fileReader.onloadend=n.handleJsonRead,n.fileReader.readAsText(t)},n.state={dccSamples:[],vcSamples:[],selectedSample:"",url:""},n.readFile=n.readFile.bind(Object(h.a)(n)),n.handleJsonRead=n.handleJsonRead.bind(Object(h.a)(n)),n.onChange=n.onChange.bind(Object(h.a)(n)),n.loadJson=n.loadJson.bind(Object(h.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(I.a)(J.a.mark((function e(){var t,a,n,i,r=this;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"https://w3c-ccg.github.io/vc-examples/index.json",t="https://digitalcredentials.github.io/samples/university-degree.json",a=[],n=[],i={},fetch("https://w3c-ccg.github.io/vc-examples/index.json").then((function(e){return e.json()})).then((function(e){n=e.map((function(e){return{value:e.url,display:e.type}}))})).then((function(){fetch(t).then((function(e){return e.json()})).then((function(e){a=[{value:t,display:"DCC sample"}],i=e,r.loadJson(i)})).then((function(){r.setState(Object(c.a)({},r.state,{dccSamples:a,vcSamples:n,selectedSample:"DCC sample",url:t}))}))}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"handleJsonRead",value:function(e){var t=JSON.parse(e.target.result);this.loadJson(t)}},{key:"onChange",value:function(e){var t=this,a=e.target.value;this.setState(Object(c.a)({},this.state,Object(k.a)({},e.target.name,a))),console.log("Loading ".concat(a)),fetch(a).then((function(e){return e.json()})).then((function(e){return t.loadJson(e)}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(y.a,{color:"inherit"},"Select a different credential:"),i.a.createElement(S.a,null,i.a.createElement(M.a,{name:"selectedSample",onClick:this.onChange},i.a.createElement("optgroup",{label:"DCC Samples"},this.state.dccSamples.map((function(e){return i.a.createElement("option",{key:e.value,value:e.value},e.display)}))),i.a.createElement("optgroup",{label:"VC Samples"},this.state.vcSamples.map((function(e){return i.a.createElement("option",{key:e.value,value:e.value},e.display)}))))),i.a.createElement(y.a,{color:"inherit",style:{padding:10}},"OR"),i.a.createElement(W,{id:"credential",text:"Upload",loadFile:this.readFile,accept:".json"}))}}]),a}(i.a.Component),T=a(174),$=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(c.a)({},n.state,Object(k.a)({},e.target.name,e.target.checked))),n.props.stripImages(e.target.checked)},n.state={checked:!1},n.handleChange=n.handleChange.bind(Object(h.a)(n)),n}return Object(d.a)(a,[{key:"render",value:function(){return i.a.createElement(C.a,null,i.a.createElement(T.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},i.a.createElement(T.a,{item:!0},i.a.createElement(y.a,{variant:"h6",color:"inherit"},"DCC Credential Designer")),i.a.createElement(T.a,{item:!0,xs:!0}),i.a.createElement(T.a,{item:!0},i.a.createElement(y.a,{color:"inherit"},"Strip Images")),i.a.createElement(T.a,null,i.a.createElement(w.a,{checked:this.state.checked,onChange:this.handleChange,name:"checked",inputProps:{"aria-label":"primary checkbox"}})),i.a.createElement(T.a,{item:!0,xs:!0}),i.a.createElement(V,{edge:"start",title:"Load a credential",handleChange:this.props.handleChange}),i.a.createElement(T.a,{item:!0,xs:!0}),i.a.createElement(S.a,{color:"inherit"},i.a.createElement(y.a,{color:"inherit"},"Download"),i.a.createElement(R.a,{onClick:this.props.downloadFile}))))}}]),a}(i.a.Component),q=a(179),z=a(180),G=a(175),H=a(176),K=a(177),Q=a(178),X=a(78),Y=a.n(X),Z=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).loadImage=function(e,t){var a=e.slice(0,-5);n.fileReader=new FileReader,n.fileReader.id=a,n.fileReader.onloadend=n.handleImageRead,n.fileReader.readAsDataURL(t)},n.state={substitutions:n.props.substitutions},n.loadImage=n.loadImage.bind(Object(h.a)(n)),n.handleImageRead=n.handleImageRead.bind(Object(h.a)(n)),n.updateSubs=n.updateSubs.bind(Object(h.a)(n)),n}return Object(d.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.substitutions!==this.state.substitutions&&this.setState({substitutions:e.substitutions})}},{key:"updateSubs",value:function(e){this.setState({substitutions:e}),this.props.updateSubs(e)}},{key:"handleImageRead",value:function(e){var t=e.target.id,a=e.target.result,n=this.state.substitutions,i=!1;if(n.forEach((function(e){e.key===t&&(e.value=a,i=!0)})),!i){var r="<dataUri.".concat(t,">");n.push({key:r,value:a})}this.updateSubs(n)}},{key:"render",value:function(){var e,t=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(y.a,{variant:"h6",color:"inherit"},"Images"),i.a.createElement(y.a,{variant:"body",color:"inherit"},"Corresponds to data urls in json editor"),i.a.createElement(G.a,{style:{width:"auto",tableLayout:"auto"}},i.a.createElement(H.a,null,null===(e=this.state.substitutions)||void 0===e?void 0:e.map((function(e){return i.a.createElement(K.a,{key:e.key+".row"},i.a.createElement(Q.a,{key:e.key+".cell1"},e.key),i.a.createElement(Q.a,{key:e.key+".cell2"},i.a.createElement("img",{id:e.key,src:e.value,width:"100px"})),i.a.createElement(Q.a,{key:e.key+".cell3"},(a=e.key+".file",n=t.loadImage,r=i.a.createElement(Y.a,null),i.a.createElement("div",null,i.a.createElement("input",{accept:"image/png, image/jpeg",type:"file",onChange:U(n),id:a,style:{display:"none"}}),i.a.createElement("label",{htmlFor:a},i.a.createElement(x.a,{variant:"contained",component:"span"},r))))),i.a.createElement(Q.a,{key:e.key+".cell4"}));var a,n,r})))))}}]),a}(i.a.Component),_=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleChange=function(e,t){n.setState(Object(c.a)({},n.state,{jsonData:e,substitutions:t}))},n.updateJsonData=function(e){n.setState(Object(c.a)({},n.state,{jsonData:e}))},n.updateSubs=function(e){n.setState(Object(c.a)({},n.state,{substitutions:e}))},n.stripImages=function(e){if(n.setState(Object(c.a)({},n.state,{strip:e})),e){var t=function(e,t){for(var a=0;a<t.length;a++)A.a.set(e,t[a].key,"<".concat(t[a].key,">"));return e}(n.state.jsonData,n.state.substitutions);n.updateJsonData(t)}else{var a=B(n.state.jsonData,n.state.substitutions);n.updateJsonData(a)}},n.downloadFile=function(){!function(e,t){P.apply(this,arguments)}(n.state.jsonData,n.state.substitutions)},n.state={jsonData:"",substitutions:[]},n.handleChange=n.handleChange.bind(Object(h.a)(n)),n.updateJsonData=n.updateJsonData.bind(Object(h.a)(n)),n.updateSubs=n.updateSubs.bind(Object(h.a)(n)),n.downloadFile=n.downloadFile.bind(Object(h.a)(n)),n.stripImages=n.stripImages.bind(Object(h.a)(n)),n}return Object(d.a)(a,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(q.a,{position:"static"},i.a.createElement($,{downloadFile:this.downloadFile,handleChange:this.handleChange,stripImages:this.stripImages})),i.a.createElement(z.a,null,i.a.createElement(O,{jsonData:this.state.jsonData,updateJsonData:this.updateJsonData}),i.a.createElement(Z,{substitutions:this.state.substitutions,updateSubs:this.updateSubs})))}}]),a}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(o.a,null,i.a.createElement(l.a,null),i.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},86:function(e,t,a){e.exports=a(134)}},[[86,1,2]]]);
//# sourceMappingURL=main.a0ec2e28.chunk.js.map